<?xml version="1.0"?>
<schema version="0.3">

    <!-- CALENDAR -->
	<table name="SchedulizerCalendar">
		<field name="id" type="I">
			<autoincrement />
			<key />
			<unsigned />
		</field>

        <!-- created/modified -->
        <field name="createdUTC" type="T">
            <NOTNULL/>
        </field>
        <field name="modifiedUTC" type="T">
            <NOTNULL/>
            <DEFTIMESTAMP/>
        </field>

		<field name="title" type="C" size="255" />
        <field name="defaultTimezone" type="C" size="255" />
        <field name="ownerID" type="I">
            <KEY/>
            <UNSIGNED />
            <NOTNULL />
            <DEFAULT value="0"/>
        </field>
		
		<!-- indices -->
        <index name="createdUTC">
            <col>createdUTC</col>
        </index>
        <index name="modifiedUTC">
            <col>modifiedUTC</col>
        </index>
		<index name="title">
			<col>title</col>
		</index>
		<index name="ownerID">
			<col>ownerID</col>
		</index>
	</table>


    <!-- EVENTS -->
    <table name="SchedulizerEvent">
        <field name="id" type="I">
            <autoincrement />
            <key />
            <unsigned />
        </field>

        <!-- created/modified -->
        <field name="createdUTC" type="T">
            <NOTNULL/>
        </field>
        <field name="modifiedUTC" type="T">
            <NOTNULL/>
            <DEFTIMESTAMP/>
        </field>

        <field name="calendarID" type="I" size="11">
            <unsigned />
        </field>
        <field name="title" type="C" size="255" />
        <field name="description" type="X2" />
        <field name="startUTC" type="T">
            <NOTNULL/>
        </field>
        <field name="endUTC" type="T">
            <NOTNULL/>
        </field>
        <field name="isAllDay" type="I1">
            <unsigned />
            <notnull />
            <default value="1" />
        </field>
        <field name="useCalendarTimezone" type="I1">
            <unsigned />
            <notnull />
            <default value="1" />
        </field>
        <field name="timezoneName" type="C" size="255" />
        <field name="timezoneOffset" type="C" size="255" />
        <field name="colorHex" type="C" size="10" />
        <field name="isRepeating" type="I1">
            <unsigned />
            <notnull />
            <default value="0" />
        </field>
        <field name="repeatTypeHandle" type="C" size="255" />
        <field name="repeatEvery" type="I" size="11">
            <unsigned />
        </field>
        <field name="repeatIndefinite" type="I1">
            <unsigned />
            <notnull />
            <default value="0" />
        </field>
        <field name="repeatEndUTC" type="T">
            <NOTNULL/>
        </field>
        <field name="repeatMonthlyMethod" type="I1">
            <unsigned />
        </field>
        <field name="ownerID" type="I">
            <KEY/>
            <UNSIGNED />
            <NOTNULL />
            <DEFAULT value="0"/>
        </field>


        <!-- indices -->
        <index name="createdUTC">
            <col>createdUTC</col>
        </index>
        <index name="modifiedUTC">
            <col>modifiedUTC</col>
        </index>
        <index name="startUTC">
            <col>startUTC</col>
        </index>
        <index name="endUTC">
            <col>endUTC</col>
        </index>
        <index name="calendarID">
            <col>calendarID</col>
        </index>
        <index name="title">
            <col>title</col>
        </index>
        <index name="ownerID">
            <col>ownerID</col>
        </index>
    </table>

    <!-- Repeating Events -->
    <table name="SchedulizerEventRepeat">
        <field name="id" type="I">
            <autoincrement />
            <key />
            <unsigned />
        </field>
        <field name="eventID" type="I" size="11">
            <unsigned />
        </field>
        <!--<field name="repeatStart" type="T">
            <NOTNULL/>
        </field>-->
        <!--<field name="repeatYear" type="I" size="5">
            <unsigned />
        </field>-->
        <!--<field name="repeatMonth" type="I" size="2">
            <unsigned />
        </field>-->
        <field name="repeatWeek" type="I" size="2">
            <unsigned />
        </field>
        <field name="repeatDay" type="I" size="2">
            <unsigned />
        </field>
        <field name="repeatWeekday" type="I" size="2">
            <unsigned />
        </field>
    </table>

    <table name="SchedulizerEventRepeatNullify">
        <field name="eventID" type="I" size="11">
            <unsigned />
        </field>
        <field name="hideOnDate" type="T">
            <NOTNULL/>
        </field>
    </table>
	
</schema>